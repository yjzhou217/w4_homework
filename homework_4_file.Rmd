# Ineqaulity task - week 4

## Load packages
```{r}
library(tidyverse)
library(sf)
library(here)
library(janitor)
library(countrycode)
```

## read in data

```{r}
HDI <- read_csv(here::here("HDR25_Composite_indices_complete_time_series.csv"),
                       locale = locale(encoding = "latin1"),
                       na = " ", skip=0)

World <- st_read("/Users/ashinxenjier/Downloads/UCL/0005 GIS/W4/w4_homework/World_Countries_(Generalized)_-573431906301700955/World_Countries_Generalized.shp")

```

## Column names


```{r}
HDIcols<- HDI %>%
  clean_names()%>%
  select(iso3, country, gii_2019, gii_2010)%>%
  mutate(difference=gii_2019-gii_2010)%>%
  #not needed here as we can now use the country name...but see below
  mutate(iso_code=countrycode(country, origin = 'country.name', destination = 'iso2c'))%>%
  mutate(iso_code2=countrycode(iso3, origin ='iso3c', destination = 'iso2c'))

  
```

## Join


```{r}
Join_HDI <- World %>% 
  clean_names() %>%
  left_join(., 
            HDIcols,
            # change to "aff_iso" = "iso_code"
            by = c("iso" = "iso_code"))

# 261 if using "aff_iso", 251 if using "iso". Could filter out the NA values.
```


```{r}
Join_HDI_2 <- World %>% 
  clean_names() %>%
  left_join(., 
            HDIcols,
            by = c("country" = "country"))
#251

```

## Problems 

### If using affiliate ISO to join


```{r}
# difference only if used aff_iso to join and make Join_HDI
Join_HDI_GB<-Join_HDI %>%
  filter(aff_iso=="GB")

Join_HDI_2_GB<-Join_HDI_2 %>%
  filter(aff_iso=="GB")
```

